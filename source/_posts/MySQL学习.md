---
title: MySQL学习
date: 2020-12-05 23:05:12
tags: 
 - MySQL
 - 笔记
 - 摘抄
---

## 数据库基本概念

- 数据库(database)：保存有组织的数据的容器(通常是一个文件或一组文件)。
  - 数据库不代表人们常使用的数据库软件，数据库软件是DBMS(数据库管理系统)。通过DBMS来访问数据库
- 表(table)：某种特定类型数据的结构化清单。
- 模式(schema)：关系数据库和表的布局及特性的信息。
  - 有时候模式用作数据库的同义词，本文中指的是上面给出的含义。
- 列(column)：表中的一个字段。所有表都是一个或多个列组成的。
  - 每个列可以看做数据的某个特定消息，假如数据是城市，则列可以是面积。
- 数据类型(datatype)：所容许的数据的类型。每个表列都有相应的数据类型，它限制该列中存储的数据。
- 行(row)：表中的一个记录。
  - 很大程度上，行和数据库记录(record)是可以互相替代的，但从技术上说，行才是正确的术语。
- 主键(primary key)：一列(或一组列)，其值能够唯一区分表中每个行，唯一识别表中的每行的这个列(或这组列)称为主键。主键用来表示一个(组)特定的行。没有主键，更新或删除表中特定行很困难，因为没有安全的方法保证只涉及相关的行。
  - 表中的任意列都可以作为主键，只要它满足以下条件(MySQL本身强制实施的)：
    - 任意两行都不具有相同的主键值
    - 每个行都必须具有一个主键值(主键列不允许NULL值)

<!-- more -->

## MySQL简介

### 什么是MySQL

MySQL被广泛使用的理由：

- 成本——MySQL是开放源代码的，一般可以免费使用(甚至可以免费修改)。
- 性能——MySQL执行很快，非常快。
- 可信赖——MySQL不会收集使用者的数据。
- 简单——MySQL容易安装和使用。

MySQL唯一受到真正的批评是它并不总是支持其他DBMS提供的功能和特性。然而，这一点也在逐步得到改善。

### 客户机-服务器软件

DBMS可分为两类：

- 基于共享文件系统的DBMS
- 基于客户机-服务器的DBMS

前者(包括Microsoft Access 和 FileMaker)用于桌面用途，通常不用于高端或更关键的应用。

MySQL、Oracle以及Microsoft SQL Server等数据库是基于客户机-服务器的数据库。

- 服务器：负责所有数据访问和处理的一个软件。
- 客户机：用于间接获取数据的软件。

## 使用MySQL

### 连接

为了连接到MySQL，需要以下信息

- 主机名——如果连接的是本地MySQL服务器，则为localhost；
- 端口；
- 用户名；
- 密码；

### 命令

`USE xx数据库`：使用某数据库。

`SHOW DATABASES`：显示所有数据库。

`SHOW TABLES`：显示当前使用数据的所有表。

`SHOW COLUMNS FROM xx表`：显示xx表所有列的基本信息，例如列名、数据类型、是否允许为NULL、键信息、默认值以及其他信息。

`DESCRIBE xx表`：和`SHOW COLUMNS FROM xx表`的功能一样。

`SHOW STATUS`：用于显示广泛的服务器状态信息。

`SHOW CREATE DATABASE`：显示创建特定数据库或表的MySQL语句。

`SHOW ERRORS`和`SHOW WARNINGS`：用来显示服务器错误或警告消息。

`HELP SHOW`：显示允许的SHOW语句

## 检索数据

### Select命令

`SELECT xx列 FROM xx表`：从xx表中选出xx列，查询单列。

> 未排序数据：查询结果的顺序是不保证的，因为mysql认为没有明确排序查询结果，则返回的数据的顺序没有特殊意义

> 结束SQL语句：多条SQL语句必须以 ‘ ; ’ 分割。MySQL如图多数DBMS一样，不需要在单条SQL语句后加分号。如果你使用的是mysql命令行，则必须加上分号来结束SQL语句

> SQL语句和大小写：SQL语句不区分大小写，但是许多SQL开发人员喜欢对所有SQL关键字使用大写，而对所有列和表名使用小写，这样做使代码更易于阅读和调试。在MySQL4.1及其之前版本中，某些标识符默认是区分大小写的，但是在之后版本是不区分的。最好的方式就是按照上面的规范来。

`SELECT x1列,x2列...xn列 FROM xx表`：从xx表中选出n个列，查询多列，列与列之间用`,`分隔。

`SELECT * FROM xx表`：从xx表中选出该表所有列，查询所有列。

> 除非你要使用所有列，不然一般不要用 * 通配符来查询，会降低检索和应用程序的性能。

`SELECT DISTINCT xx列 FROM xx表`：返回不带重复的单列数据，DISITINCT指示MySQL只返回不同的值。

> 要注意，不能部分使用DISTINCT，DISITINCT关键字应用于所有列而不仅是前置它的列，如果给出`SELECT DISITINCT vend_id prod_price`，除非指定的两个列都不同，否则所有列都将被检索出来。

`SELECT xx列 FROM xx表 LIMIT 5`：返回数据至多5行。LIMIT限制返回不多于5行，为了得出下一个5行，可指定要检索的开始行和行数，例如`SELECT xx列 FROM xx表 LIMIT 5,5`，这个语句将返回从行5开始的5行数据，第一个数为开始位置，第二个数为要检索的行数。

> 带一个值的LIMIT总是从第一行开始，给出的数为检索的行数。

> 检索出来的第一行为行0而不是行1，`LIMIT 1,1`将检索出第二行

> MySQL 5的LIMIT语法：MySQL 5支持LIMIT的另一种替代语法，`LIMIT 4 OFFSET 3`意为从行3开始取4行，就像`LIMIT 3,4`一样

### 其他

​	SQL可以使用完全限定的表名，例如`SELECT products.prod_name FROM products`其功能和`SELECT prod_name FROM products`一样。后面可能会出现重名数据，所以需要区分两者。